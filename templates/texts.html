{% extends "base.html" %}

{% load sefaria_tags %}
{% load humanize %}

{% block title %}Jewish Texts known to Sefaria.org{% endblock %}

{% block content %}

{% include "elements/header.html" %}

<div id="textsPage">
<div id="expand" class="btn">+ Expand All</div>
<h1>Texts Overview</h1>

<ul id="textsList">
{% for category in toc %}
	<li class="category">
		{% include "elements/categoryInfo.html" with category=category %}
		<div class="subBox">
		{% for content in category.contents %}
			<ul class="sub">
			{% if "title" in content %}
				<li class="text">
					{% include "elements/textInfo.html" with text=content %}
				</li>
			{% else %}
				<li class="category sub">
					{% include "elements/categoryInfo.html" with category=content %}
	
					<ul class="sub subBox">
					{% for sub in content.contents %}
						<li class="text">
						{% include "elements/textInfo.html" with text=sub %}
						</li>
					{% endfor %}
					</ul>
				</li>
			{% endif %}

			</ul>
		{% endfor %}
		</div>
	</li>
{% endfor %}
</ul>

</div>

{% endblock %}

{% block js %}
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.0/jquery.js"></script>
	<script>

		var sjs = sjs || {};

		$.extend(sjs, {
			toc: {{ toc|jsonify }}
		});

		$(".categoryName").on("click", function(e) {
			if ($(this).hasClass("open")) {
				$(this).closest("li").children(".subBox").slideUp(100);
			} else {
				$(this).closest("li").children(".subBox").slideDown(100);
			}
			$(this).toggleClass("open");
		});

		$("#expand").on("click", function(){
			$(".categoryName").trigger("click");
		})
	</script>
{% endblock %}