<!DOCTYPE html>
<html>
<head>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    {% block ogimage %}<meta property="og:image" content="http://www.sefaria.org/static/img/fb-og-image.png"/>{% endblock %}
    <title>{% block title %}{% endblock %}</title>
    {% block head %}{% endblock %}    
    <link rel="stylesheet" href="/static/js/jquery-ui/css/smoothness/jquery-ui-1.8.22.custom.css">
    <link rel="stylesheet" href="/static/bootstrap/css/bootstrap.css">
    <link rel="stylesheet" href="/static/font-awesome/css/font-awesome.css">
    <link rel="stylesheet" href="/static/css/base.css">
    <link rel="stylesheet" href="/static/css/common.css">

    {% if S2 or request.flavour == "mobile" %}
        <link rel="stylesheet" href="/static/css/s2.css">
        {% block exclude_block_on_source_sheets %}
            <link rel="stylesheet" href="/static/css/static.css">
        {% endblock %}

    {%  endif %}
    <style>
        {% block css %}{% endblock %}
    </style>
    {% if S2 or request.flavour == "mobile" %}
    <style>
      body {
        overflow: visible;
      }
    </style>
    {%  endif %}

	<script>
        {% include "js/analytics.js" %}
    </script>

    {% if not OFFLINE %}
    <script src="https://use.typekit.net/aeg8div.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/webfont/1.5.10/webfont.js"></script>
    <script>try{Typekit.load({ async: true });}catch(e){}</script>
    <script>
      WebFont.load({
        google: {
          families: ['Montserrat:400,700', 'Alef:400,700:latin,hebrew' ]
        }
      });
    </script>
    {% endif %}

</head>

<body>
    <div class="wrapper">
        <div id="content" class="{% if contentLang == "bilingual" %}english{% else %}{{ contentLang }}{% endif %}">
            {% include "header.html" %}
            {% if not S2 and not request.flavour == "mobile" %}
                {% include "elements/login_prompt.html" with msg="Please log in to edit." %}
            {% endif %}

            {% block content %}{% endblock %}

        </div>
    </div>

    {% if not request.flavour == "mobile" %}
        {% block footer %}
            {% include "elements/footer.html" with class=contentLang %}
        {% endblock %}
    {% endif %}

    {% include "js/jquery.html" %}
    <script src="/static/js/jquery.tooltipster.min.js"></script>
    <script>{% include "js/django-csrf.js" %}</script>
    {% if not S2 and not request.flavour == "mobile" %}
        {% include "js/headers.js" %}
    {%  endif %}
    {% if S2 or request.flavour == "mobile" %}
        <script src="/static/js/headroom.js"></script>
        <script src="/static/js/jquery.scrollTo.js"></script>
        <script src="/data.js"></script>
        <script src="/static/js/sefaria.js"></script>
        {% if DEBUG %}
        <script src="/static/js/react.js"></script>
        <script src="/static/js/react-dom.js"></script>
        <script src="/static/js/JSXTransformer.js"></script>
        <script type="text/jsx" src="/static/js/s2.jsx"></script>
        {% else %}
        <script src="/static/js/react-min.js"></script>
        <script src="/static/js/react-dom-min.js"></script>
        <script src="/static/js/s2.js"></script>
        {% endif %}
        <script {% if DEBUG %}type="text/jsx"{% endif %}>
          {% autoescape off %}
          $(function() {

            var settings = {
              language: "{{ contentLang }}",
              layoutDefault: $.cookie("layoutDefault") || "segmented",
              layoutTalmud:  $.cookie("layoutTalmud")  || "continuous",
              layoutTanach:  $.cookie("layoutTanach")  || "segmented",
              color:         $.cookie("color")         || "light",
              fontSize:      $.cookie("fontSize")      || 62.5
            };
            var multiPanel    = $(window).width() > 600;

            ReactDOM.render(
              React.createElement(ReaderApp, {
                headerMode: true,
                multiPanel: multiPanel,
                initialRefs: [],
                initialFilter: [],
                initialMenu: null,
                initialQuery: null,
                initialSheetsTag: null,
                initialNavigationCategories: [],
                initialSettings: settings,
                initialPanels: []}),
              document.getElementById('s2')
            );

          });
          {% endautoescape %}
        </script>
    {%  endif %}
    {% block js %}{% endblock %}
</body>
</html>